---
title: React 統合
description: React で waa-play を使用するインタラクティブデモ
---

import ReactPlayerDemo from '../../../components/demo/ReactPlayerDemo.tsx';
import { Code } from '@astrojs/starlight/components';
import { reactPlayerDemo } from '../../../snippets/demos/react-integration';

React で waa-play を使用する実動デモです。`useSyncExternalStore` と `subscribeSnapshot` / `getSnapshot` を使って、再生状態をリアクティブに管理します。

<ReactPlayerDemo client:load locale="ja" />

## ソースコード

このデモの完全なソースコードです。

<Code code={reactPlayerDemo} lang="tsx" />

## ポイント

- **`useSyncExternalStore`**: React 18+ の公式 API。外部ストア（waa-play の Playback）をリアクティブに購読
- **`subscribeSnapshot`**: Playback の状態変更を購読するコールバック
- **`getSnapshot`**: 現在の `PlaybackSnapshot`（state, position, duration, progress）を取得
- **`onFrame`**: `requestAnimationFrame` ベースのフレームループ（ビジュアライザー等に使用）
