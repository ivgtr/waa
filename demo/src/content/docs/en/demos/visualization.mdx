---
title: Visualization
description: Waveform display and real-time frequency visualizer demo
---

import VisualizationDemo from '../../../../components/demo/VisualizationDemo.astro';

A demo of waveform data extraction and real-time frequency analysis.

- **Waveform**: Extract peak/RMS data with `extractPeakPairs()` and render on Canvas
- **Resolution**: Adjust waveform resolution in real-time with a slider
- **Frequency Visualizer**: Real-time frequency analysis using AnalyserNode

<VisualizationDemo locale="en" />

## Code Examples

### Extracting Waveform Data

```ts
import { WaaPlayer } from "waa-play";

const player = new WaaPlayer();
const buffer = player.createSineBuffer(440, 2);

const peaks = player.extractPeakPairs(buffer, { resolution: 300 });

const canvas = document.querySelector("canvas")!;
const ctx = canvas.getContext("2d")!;
const w = canvas.width, h = canvas.height, mid = h / 2;
const barWidth = w / peaks.length;

for (let i = 0; i < peaks.length; i++) {
  const { min, max } = peaks[i];
  ctx.fillStyle = "rgba(99, 102, 241, 0.6)";
  ctx.fillRect(i * barWidth, mid - max * mid, barWidth - 0.5, (max - min) * mid);
}
```

### Real-time Frequency Analysis

```ts
const analyser = player.createAnalyser({ fftSize: 256 });
player.chain(gain, analyser, player.ctx.destination);

const stop = player.onFrame(playback, () => {
  const data = player.getFrequencyDataByte(analyser);
  // data is Uint8Array â€” each element is a 0-255 value for a frequency bin
  drawBars(data);
});
```
