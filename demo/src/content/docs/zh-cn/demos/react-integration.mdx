---
title: React 集成
description: 在 React 中使用 waa-play 的交互式演示
---

import ReactPlayerDemo from '../../../../components/demo/ReactPlayerDemo.tsx';
import { Code } from '@astrojs/starlight/components';
import { reactPlayerDemo } from '../../../../snippets/demos/react-integration';

在 React 中使用 waa-play 的实际运行演示。使用 `useSyncExternalStore` 和 `subscribeSnapshot` / `getSnapshot` 来响应式管理播放状态。

<ReactPlayerDemo client:load locale="zh-cn" />

## 源代码

此演示的完整源代码。

<Code code={reactPlayerDemo} lang="tsx" />

## 要点

- **`useSyncExternalStore`**: React 18+ 官方 API，用于订阅外部存储
- **`subscribeSnapshot`**: 订阅 Playback 状态变化
- **`getSnapshot`**: 获取当前的 `PlaybackSnapshot`（state, position, duration, progress）
- **`onFrame`**: 基于 `requestAnimationFrame` 的帧循环（用于可视化等）
