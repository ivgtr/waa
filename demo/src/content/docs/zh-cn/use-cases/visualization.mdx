---
title: 可视化
description: 音频可视化模式，包括波形渲染和实时频率显示
---

import { Code } from '@astrojs/starlight/components';
import { staticWaveformPlayer, staticWaveformFn, playbackCursorPlayer, playbackCursorFn, realtimeFrequencyPlayer, realtimeFrequencyFn } from '../../../../snippets/use-cases/visualization';

本指南介绍三种音频数据可视化模式：静态波形渲染、播放光标跟踪和实时频谱显示。

**使用的模块**: `waveform`, `nodes`, `adapters`, `play`

## 1. 静态波形渲染

从 AudioBuffer 提取峰值对并在 Canvas 上渲染波形。

<Code code={staticWaveformPlayer} lang="ts" />

`extractPeakPairs` 从 AudioBuffer 提取最小/最大值对。使用 `resolution` 参数控制输出数据点数量。

<details>
<summary>函数 API 版</summary>

<Code code={staticWaveformFn} lang="ts" />

</details>

## 2. 播放光标跟踪

根据播放位置移动光标，并对已播放部分进行颜色标记。

<Code code={playbackCursorPlayer} lang="ts" />

`onFrame` 使用 `requestAnimationFrame` 在每一帧返回 `PlaybackSnapshot`。使用 `progress` (0–1) 计算光标位置。

<details>
<summary>函数 API 版</summary>

<Code code={playbackCursorFn} lang="ts" />

</details>

## 3. 实时频率显示

使用 AnalyserNode 在播放期间实时显示频谱。

<Code code={realtimeFrequencyPlayer} lang="ts" />

`createAnalyser` 创建 AnalyserNode 并通过 `through` 路由。`getFrequencyDataByte` 以 Uint8Array (0-255) 返回频率数据。

<details>
<summary>函数 API 版</summary>

<Code code={realtimeFrequencyFn} lang="ts" />

</details>

## 相关 API

- [WaaPlayer](/waa/api/player/)
- [函数 API](/waa/api/functions/)
